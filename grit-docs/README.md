# grit documentation

Welcome to the wonderful world of documentation! This describes what you need to install and setup to get started, how the documentation works, and provides some guidelines for the editing to ensure a consistent look for images.

## Requirements

To contribute to the documentation and be able to follow the guidelines below you will need the following tools (or in some cases a similar alternative if you know what you are doing!):

- git and [git-lfs](https://git-lfs.com/)
- [Docker](https://www.docker.com/get-started/)
- [Visual Studio Code](https://code.visualstudio.com/) and the LTex extension to get spell check
- [GIMP](https://www.gimp.org/), for annotating screenshots

### Git and Git LFS

Setup git as described in the [GitHub documentation](https://docs.github.com/en/get-started/git-basics/set-up-git).

Setup git-lfs as described in the [GitHub documentation](https://docs.github.com/en/repositories/working-with-files/managing-large-files/installing-git-large-file-storage).

### Docker

Install Docker Desktop as described in the [official documentation](https://docs.docker.com/get-started/get-docker/)

### Visual Studio Code

Install Visual Studio Code as described in the [official documentation](https://code.visualstudio.com/download)

You can naturally use another editor if you prefer. But the rest of the guide below assume you use Visual Studio Code

## Documentation development setup

Clone the [grit repository](https://github.com/grit42/grit) as described in the [Github documentation](https://docs.github.com/en/repositories/creating-and-managing-repositories/cloning-a-repository) and open the `grit.code-workspace` file in Visual Studio Code.

### Install the LTex extension for spell checking

In Visual Studio Code, open the extension menu by clicking the four squares in the leftmost vertical bar.
Look for **LTeX â€“ LanguageTool grammar/spell checking** under the _Recommended_ section and click **Install**

### Set up git-lfs

Open a terminal at the root of the repository and run the following commands

```sh
# Install the git-lfs extension
git lfs install --local

# Check settings
git lfs track

# Should output something like:

# Listing tracked patterns
#    grit-docs/**/*.png (.gitattributes)
#    grit-docs/**/*.xcf (.gitattributes)
# Listing excluded patterns

# Pull the images
git lfs pull
```

### Start the documentation development server

In a terminal at the root of the repo, run

```sh
cd grit-docs
docker compose build
docker compose up
```

Navigate to [http://localhost:4242/docs](http://localhost:4242/docs), you should see the landing page of the documentation. The server may take a minute to start.

## Writing documentation

The documentation is located under `/grit-docs/docs` built with [Docusaurus](https://docusaurus.io/docs) and is written in [Markdown](https://www.markdownguide.org/).

Each subdirectory in this directory represents a section of the documentation, which can have nested subsections in the form of more subdirectories.

Each directory and file will be added to the sidebar automatically.

How a directory appears in the sidebar is configured by a special `_category.json_` file, such as

```jsonc
// /grit-docs/docs/somesection/category.json
{
  "label": "Some section",
  "position": 4,
  "link": {
    "type": "generated-index",
    "description": "The description that will appear above the generated index"
  }
}
```

How a file appears in the sidebar is configured by a header
```
# /grit-docs/docs/compounds/compounds_grid.md
---
sidebar_label: 'Compounds grid'
sidebar_position: 1
---
```

Refer to the [Docusaurus docs](https://docusaurus.io/docs/sidebar/autogenerated#autogenerated-sidebar-metadata) for more information.

## Contributing

Checkout the main branch and pull the latest state, then create a branch for your work, prefixed with `docs/`

For instance in a terminal, run:

```sh
git checkout main
git pull
git checkout -b docs/a-meaningful-branch-name
```

Make your changes.

Add your changes, commit and push to the remote repository

For instance in a terminal, run:

```sh
git add grit-docs
git commit -m "Fix: typos in compounds section"
git push -u origin docs/a-meaningful-branch-name
# or for subsequent pushes, simply
git push
```

Navigate to the [grit repository](https://github.com/grit42/grit), and open a pull request targetting the `main` branch with a description of your changes.

## Guidelines for images

### User name

Rename your user to `Marvin` in the account settings for consistency across installations.

### Capturing screenshots

Screenshots should be taken via the Google Chrome dev tools, with resolution set to 1365x768. This is useful to ensure unified interface proportions across machines, close to what users will see on a modern laptop.

![Dev tools](./resources/meta/devtools.png)

- Open the dev tools with `CTRL+SHIFT+I`
- Switch to responsive mode (1)
- Add **device pixel ratio** from the dropdown (2)
- Ensure `device pixel ratio (DPR)` is set to 1 (3)
- Set resolution to 1365x768 (4)
- Use **Capture screenshot** from the dropdown (2) to capture screenshot

### Annotating images

Images should be annotated using the number images in the `grit-docs/resources/annotations` directory.

The current process is as follows (IF you decided to install GIMP. Other tools that support layers can surely be used. We use GIMP and that is what the below guide describes):

1. Open the freshly captured screenshot in GIMP
2. Add the annotations as layers
    - Click File > Open as layers...
    - Navigate to `grit/grit-docs/resources/annotations`
    - Open all the number images
3. Move the annotations to the appropriate locations on the screenshot
    - If all annotations are not used, hide the unused ones in the layer controls (likely on the right side of the interface)
4. Save the GIMP project under a meaningful name to the `assets/gimp_projects` directory in the same directory as the markdown file the resulting image will be used in.
    - Create `assets/gimp_projects` if it does not exist
5. Export the GIMP project as PNG using File > Export as...
    - Set a meaningful name (ideally the same as the saved GIMP project)
    - Ensure the file name ends in `.png`
    - Save the file to the `assets` directory in the same directory as the markdown file it will be used in.
6. For speeding up the process with subsequent screenshots, feel free to:
    - Open the new screenshot as a layer in the same project and move it all the way to the background
    - Remove the layer containing the previous screenshot
    - Save the GIMP project under a new name
    - Go to step 3, revealing hidden annotations if needed


